<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <title>weather</title>
    <!-- Latest compiled and minified CSS -->
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css"
    />

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
  </head>

  <body>
    <p id="demo"></p>
    <script>
      const tempElement = document.querySelector(".temperature-value p");
      const descElement = document.querySelector(".temperature-description p");
      const locationElement = document.querySelector(".location p");
      const notificationElement = document.querySelector(".notification");
      var x = document.getElementById("demo");
      const key = "0a2c03e9dee2533389d7b459d0f8595e";
      const KELVIN = 273;
      const weather = {};

      weather.temperature = {
        unit: "celsius",
      };
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition);
      } else {
        x.innerHTML = "Geolocation is not supported by this browser.";
      }

      function showPosition(position) {
        let latitude = position.coords.latitude;
        let longitude = position.coords.longitude;

        getWeather(latitude, longitude);
      }

      function getWeather(latitude, longitude) {
        let api = `http://api.openweathermap.org/data/2.5/weather?lat=${latitude}&lon=${longitude}&appid=${key}`;

        fetch(api)
          .then(function (response) {
            let data = response.json();
            return data;
          })
          .then(function (data) {
            weather.temperature.value = Math.floor(data.main.temp - KELVIN);
            weather.description = data.weather[0].description;
            weather.iconId = data.weather[0].icon;
            weather.city = data.name;
            weather.country = data.sys.country;
          })
          .then(function () {
            displayWeather();
          });
      }
      function displayWeather() {
        x.innerHTML =
          "temperature:" +
          weather.temperature.value +
          "Â°C" +
          "<br>description:" +
          weather.description +
          "<br>City:" +
          weather.city;
      }
    </script>
  </body>
</html>
